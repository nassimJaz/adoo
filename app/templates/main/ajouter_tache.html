{% extends "base.html" %}

{% block content %}
<div class="max-w-2xl mx-auto">
    <h1 class="text-2xl font-bold mb-6">Ajouter une nouvelle tâche</h1>

    <form method="POST" class="space-y-6">
        <!-- Titre -->
        <div class="form-group">
            <label for="titre" class="block text-sm font-medium text-gray-700">Titre de la tâche *</label>
            <input type="text" id="titre" name="titre" required
                class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500">
        </div>

        <!-- Description -->
        <div class="form-group">
            <label for="description" class="block text-sm font-medium text-gray-700">Description *</label>
            <textarea id="description" name="description" required rows="4"
                class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"></textarea>
        </div>

        <!-- Priorité -->
        <div class="form-group">
            <label for="priorite" class="block text-sm font-medium text-gray-700">Priorité *</label>
            <select id="priorite" name="priorite" required
                class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500">
                <option value="Faible">Faible</option>
                <option value="Moyenne">Moyenne</option>
                <option value="Haute">Haute</option>
            </select>
        </div>

        <!-- Responsable -->
        <div class="form-group">
            <label for="respo_id" class="block text-sm font-medium text-gray-700">Responsable</label>
            <select id="respo_id" name="respo_id"
                class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500">
                <option value="">Non assigné</option>
                {% for membre in membres %}
                <option value="{{ membre.utilisateur.id }}">{{ membre.utilisateur.prenom }} {{ membre.utilisateur.nom }}</option>
                {% endfor %}
            </select>
        </div>

        <!-- Date d'échéance -->
        <div class="form-group">
            <label for="date_echeance" class="block text-sm font-medium text-gray-700">Date d'échéance *</label>
            <input type="date" id="date_echeance" name="date_echeance" required
                class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500">
        </div>

        <!-- Boutons -->
        <div class="flex justify-end space-x-4">
            <a href="{{ url_for('main.projet_detaille', id_projet=request.view_args.id_projet) }}"
                class="px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50">
                Annuler
            </a>
            <button type="submit"
                class="px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700">
                Créer la tâche
            </button>
        </div>
    </form>
</div>
{% endblock %}
